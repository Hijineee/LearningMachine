<?xml version="1.0" encoding="UTF-8" ?> <!-- 맵퍼파일 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="Admin">

  	<select id="userList" resultType="userDTO">
  		select * from user where u_authority IN (1,2,3)
  	</select>
  	<select id="userSearch" parameterType="string" resultType="userDTO">
  		select * from user where u_name LIKE '%' #{u_name } '%'	
  	</select>
  	<select id="studentLecture" parameterType="string" resultType="HashMap">
  		select * from user_lecture_view where u_id = #{u_id} group by l_code
  	</select>
  	<select id="studentReport" parameterType="string" resultType="HashMap"> 
  		select * from user_teacher_reported_View 
  		<if test = "u_id != null">
  			where u_id = #{u_id} and u_del = 0
  		</if>
  		<if test = "u_id == null">
  			where u_del = 0
  		</if>
  	</select>
  	
  	<insert id="report" parameterType="bannedDTO">
      INSERT INTO user_banned(u_id,admin_id, bu_reason) 
      VALUES (#{u_id}, #{admin_id},#{bu_reason})
   </insert>
 
 	<update id="userReport" parameterType="String">
 		update user set u_del = 2 where u_id = #{u_id}
 	</update>
 	<update id="back" parameterType="String">
 		update user set u_del = 0 where u_id = #{u_id}
 	</update>
 	
 	<delete id="backdelete" parameterType="String">
 		delete from user_banned where u_id=#{u_id}
 	</delete>
 	
 	<select id="teacherList" resultType="HashMap">
 		select * from lecture_info_view
 	</select>
 	
 	<select id="studentBanList" resultType="HashMap">
 		select * from user_banned
 	</select>
 	
 	<select id="teacherSerch" parameterType="String" resultType="hashmap">
 		select * from lecture_info_view where t_nickname LIKE '%' #{t_nickname } '%'	
 	</select>
 	
 	<select id="refundList" resultType="hashmap">
 		select * from payment_refund_apply 
 	</select>
 	
 	<select id="lectureRequest" resultType="hashmap">
 		select * from lecture_apply
 	</select>
 	
  </mapper>